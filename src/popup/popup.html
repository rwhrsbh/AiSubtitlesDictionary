<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>AI Subtitles</title>
    <link rel="stylesheet" href="popup.css">
</head>

<body>
    <div class="header" data-i18n="popup_title">AI Subtitles Dictionary</div>
    <div class="tabs">
        <div class="tab active" data-tab="review" data-i18n="tab_review">Review</div>
        <div class="tab" data-tab="words" data-i18n="tab_words">Words</div>
        <div class="tab" data-tab="history" data-i18n="tab_history">History</div>
        <div class="tab" data-tab="settings" data-i18n="tab_settings">Settings</div>
    </div>

    <!-- Review Tab -->
    <div id="review-tab" class="content">
        <div class="review-summary">
            <p id="words-count">0 words to review</p>
            <button id="start-review-btn" class="primary-btn" data-i18n="start_review">Start Review Session</button>
            <button id="start-flashcards-btn" class="secondary-btn" style="margin-top: 12px;"
                data-i18n="practice_flashcards">üìö Flashcards</button>
            <button id="start-context-cards-btn" class="secondary-btn" style="margin-top: 12px;"
                data-i18n="context_cards">üìù Context Cards</button>
            <button id="start-definition-cards-btn" class="secondary-btn" style="margin-top: 12px;"
                data-i18n="definition_cards">üìñ Definition Cards</button>
        </div>
        <div id="no-review" class="hidden" style="text-align:center; color:#888;" data-i18n="all_caught_up">
            All caught up! üéâ
        </div>
    </div>

    <!-- Words Tab -->
    <div id="words-tab" class="content hidden">
        <div class="words-header">
            <input type="text" id="word-search" placeholder="Search words..." style="margin-bottom: 10px;">
            <div id="word-stats">Total: <span id="total-words">0</span> words</div>
            <button id="add-category-btn" class="secondary-btn" style="width: 100%; margin-bottom: 10px;"
                data-i18n="add_category">+ Add Category</button>
        </div>
        <div id="words-list" class="words-list">
            <!-- Words injected here -->
        </div>
        <div id="no-words" class="hidden" style="text-align:center; color:#888;">
            No words yet. Click on words in YouTube subtitles to add them!
        </div>
    </div>

    <!-- History Tab -->
    <div id="history-tab" class="content hidden">
        <div class="words-header">
            <input type="text" id="history-search" placeholder="Search history...">
            <div id="history-stats">Total: <span id="total-history">0</span> viewed</div>
        </div>
        <div id="history-list" class="words-list">
            <!-- History words injected here -->
        </div>
        <div id="no-history" class="hidden" style="text-align:center; color:#888;">
            No history yet. Click on words in YouTube subtitles!
        </div>
    </div>

    <!-- Settings Tab -->
    <div id="settings-tab" class="content hidden">
        <div class="form-group">
            <label data-i18n="settings_api_key">Gemini API Key</label>
            <input type="password" id="api-key" placeholder="Enter your API Key">
        </div>

        <div class="form-group">
            <label data-i18n="settings_model">Gemini Model</label>
            <select id="gemini-model">
            </select>
        </div>

        <div class="form-group">
            <label data-i18n="quiz_settings">Quiz Types</label>
            <div class="checkbox-group">
                <label class="checkbox-label">
                    <input type="checkbox" id="quiz-translation" checked>
                    <span data-i18n="quiz_translation">Translation Quiz</span>
                </label>
                <label class="checkbox-label">
                    <input type="checkbox" id="quiz-transcription" checked>
                    <span data-i18n="quiz_transcription">Transcription Quiz</span>
                </label>
            </div>
        </div>

        <div class="form-group">
            <label for="app-language" data-i18n="settings_language">Interface & AI Language</label>
            <select id="app-language" class="model-select">
                <option value="en">English</option>
                <option value="ru">–†—É—Å—Å–∫–∏–π (Russian)</option>
                <option value="uk">–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞ (Ukrainian)</option>
            </select>
        </div>

        <div class="form-group">
            <label data-i18n="flashcards_settings">Flashcards Settings</label>
            <div class="checkbox-group">
                <label class="checkbox-label">
                    <input type="checkbox" id="flashcards-include-history">
                    <span data-i18n="settings_flashcards_history">Include History words in Flashcards</span>
                </label>
            </div>
        </div>

        <div class="form-group">
            <label data-i18n="tts_settings">TTS (Speech) Settings</label>
            <div class="checkbox-group">
                <label class="checkbox-label">
                    <input type="checkbox" id="tts-enabled" checked>
                    <span data-i18n="settings_tts_enabled">Enable TTS Pronunciation</span>
                </label>
                <label class="checkbox-label">
                    <input type="checkbox" id="tts-auto-generate" checked>
                    <span data-i18n="settings_tts_auto_generate">Auto-generate speech when adding words</span>
                </label>
            </div>
            <div style="margin-top: 12px;">
                <label style="font-size: 13px; color: #666; display: block; margin-bottom: 4px;"
                    data-i18n="settings_tts_difficulty">Speaking Difficulty</label>
                <select id="tts-difficulty" class="model-select">
                    <option value="A1">A1 - Very slowly and clearly</option>
                    <option value="A2">A2 - Slowly and clearly</option>
                    <option value="B1">B1 - Moderate pace</option>
                    <option value="B2" selected>B2 - Natural native speaker</option>
                    <option value="C1">C1 - Quick and fluent</option>
                    <option value="C2">C2 - Very quick with nuances</option>
                </select>
            </div>
            <div style="margin-top: 12px;">
                <label style="font-size: 13px; color: #666; display: block; margin-bottom: 4px;"
                    data-i18n="settings_tts_voice">Voice Model</label>
                <select id="tts-voice" class="model-select">
                    <option value="Zephyr" selected>Zephyr - Bright, Higher pitch</option>
                    <option value="Puck">Puck - Upbeat, Middle pitch</option>
                    <option value="Charon">Charon - Informative, Lower pitch</option>
                    <option value="Kore">Kore - Firm, Middle pitch</option>
                    <option value="Fenrir">Fenrir - Excitable, Lower middle pitch</option>
                    <option value="Leda">Leda - Youthful, Higher pitch</option>
                    <option value="Orus">Orus - Firm, Lower middle pitch</option>
                    <option value="Aoede">Aoede - Breezy, Middle pitch</option>
                    <option value="Callirrhoe">Callirrhoe - Easy-going, Middle pitch</option>
                    <option value="Autonoe">Autonoe - Bright, Middle pitch</option>
                    <option value="Enceladus">Enceladus - Breathy, Lower pitch</option>
                    <option value="Iapetus">Iapetus - Clear, Lower middle pitch</option>
                    <option value="Umbriel">Umbriel - Easy-going, Lower middle pitch</option>
                    <option value="Algieba">Algieba - Smooth, Lower pitch</option>
                    <option value="Despina">Despina - Smooth, Middle pitch</option>
                    <option value="Erinome">Erinome - Clear, Middle pitch</option>
                    <option value="Algenib">Algenib - Gravelly, Lower pitch</option>
                    <option value="Rasalgethi">Rasalgethi - Informative, Middle pitch</option>
                    <option value="Laomedeia">Laomedeia - Upbeat, Higher pitch</option>
                    <option value="Achernar">Achernar - Soft, Higher pitch</option>
                    <option value="Alnilam">Alnilam - Firm, Lower middle pitch</option>
                    <option value="Schedar">Schedar - Even, Lower middle pitch</option>
                    <option value="Gacrux">Gacrux - Mature, Middle pitch</option>
                    <option value="Pulcherrima">Pulcherrima - Forward, Middle pitch</option>
                    <option value="Achird">Achird - Friendly, Lower middle pitch</option>
                    <option value="Zubenelgenubi">Zubenelgenubi - Casual, Lower middle pitch</option>
                    <option value="Vindemiatrix">Vindemiatrix - Gentle, Middle pitch</option>
                    <option value="Sadachbia">Sadachbia - Lively, Lower pitch</option>
                    <option value="Sadaltager">Sadaltager - Knowledgeable, Middle pitch</option>
                    <option value="Sulafat">Sulafat - Warm, Middle pitch</option>
                </select>
            </div>
        </div>

        <div class="form-group">
            <label data-i18n="settings_limits">Word Limits</label>
            <div style="margin-top: 8px;">
                <label style="font-size: 13px; color: #666; display: block; margin-bottom: 4px;"
                    data-i18n="settings_tasks_limit">Review Tasks Limit (per session)</label>
                <input type="number" id="tasks-limit" min="1" max="100" value="20"
                    style="width: 95%; padding: 8px; border: 1px solid #ddd; border-radius: 6px;">
            </div>
            <div style="margin-top: 12px;">
                <label style="font-size: 13px; color: #666; display: block; margin-bottom: 4px;"
                    data-i18n="settings_simple_flashcards_words_limit">Simple Flashcards: Words Limit</label>
                <input type="number" id="simple-flashcards-words-limit" min="1" max="200" value="25"
                    style="width: 95%; padding: 8px; border: 1px solid #ddd; border-radius: 6px;">
            </div>
            <div style="margin-top: 12px;">
                <label style="font-size: 13px; color: #666; display: block; margin-bottom: 4px;"
                    data-i18n="settings_simple_flashcards_exercises_limit">Flashcards: Exercises Limit</label>
                <input type="number" id="simple-flashcards-exercises-limit" min="1" max="100" value="25"
                    style="width: 95%; padding: 8px; border: 1px solid #ddd; border-radius: 6px;">
            </div>
            <div style="margin-top: 12px;">
                <label style="font-size: 13px; color: #666; display: block; margin-bottom: 4px;"
                    data-i18n="settings_flashcards_words_limit">Context Cards: Words Limit</label>
                <input type="number" id="flashcards-words-limit" min="1" max="200" value="25"
                    style="width: 95%; padding: 8px; border: 1px solid #ddd; border-radius: 6px;">
            </div>
            <div style="margin-top: 12px;">
                <label style="font-size: 13px; color: #666; display: block; margin-bottom: 4px;"
                    data-i18n="settings_flashcards_exercises_limit">Context Cards: Exercises Limit</label>
                <input type="number" id="flashcards-exercises-limit" min="1" max="100" value="25"
                    style="width: 95%; padding: 8px; border: 1px solid #ddd; border-radius: 6px;">
            </div>
            <div style="margin-top: 12px;">
                <label style="font-size: 13px; color: #666; display: block; margin-bottom: 4px;"
                    data-i18n="settings_def_cards_words_limit">Definition Cards Words
                    Limit</label>
                <input type="number" id="def-cards-words-limit" min="1" max="50" value="10"
                    style="width: 95%; padding: 8px; border: 1px solid #ddd; border-radius: 6px;">
            </div>
            <div style="margin-top: 12px;">
                <label style="font-size: 13px; color: #666; display: block; margin-bottom: 4px;"
                    data-i18n="settings_def_cards_exercises_limit">Definition Cards Exercises Limit</label>
                <input type="number" id="def-cards-exercises-limit" min="1" max="50" value="10"
                    style="width: 95%; padding: 8px; border: 1px solid #ddd; border-radius: 6px;">
            </div>
        </div>

        <div class="form-group">
            <label data-i18n="settings_data_management">Data Management</label>
            <div style="display: flex; gap: 10px;">
                <button id="export-data-btn" class="secondary-btn" style="flex: 1;" data-i18n="settings_export">Export
                    Data</button>
                <button id="import-data-btn" class="secondary-btn" style="flex: 1;" data-i18n="settings_import">Import
                    Data</button>
                <input type="file" id="import-file-input" accept=".json" style="display: none;">
            </div>
        </div>

        <p style="font-size:12px; color:#666; margin-top:10px;">
            Get your key from <a href="https://aistudio.google.com/" target="_blank">Google AI Studio</a>.
        </p>
    </div>

    <!-- Add Word Modal -->
    <div id="add-word-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3 data-i18n="popup_add_word">Add New Word</h3>
                <span class="close-modal">&times;</span>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <input type="text" id="new-word-input" placeholder="Enter word..." class="full-width-input">
                </div>

                <div id="word-preview-area" class="hidden">
                    <div class="loading-spinner hidden" id="word-loading"></div>
                    <div id="word-result" class="hidden">
                        <div class="result-row">
                            <span class="label" data-i18n="popup_label_word">Word:</span>
                            <span id="preview-word" class="value"></span>
                        </div>
                        <div class="result-row">
                            <span class="label" data-i18n="popup_label_translation">Translation:</span>
                            <input type="text" id="preview-translation" class="edit-input">
                        </div>
                        <div class="result-row">
                            <span class="label" data-i18n="popup_label_transcription">Transcription:</span>
                            <input type="text" id="preview-transcription" class="edit-input">
                        </div>
                        <div class="result-row">
                            <span class="label" data-i18n="popup_label_definition">Definition:</span>
                            <textarea id="preview-definition" class="edit-textarea"></textarea>
                        </div>
                        <div class="result-row">
                            <span class="label" data-i18n="popup_label_language">Language:</span>
                            <span id="preview-language" class="value"></span>
                        </div>
                    </div>
                    <div id="word-error" class="error-msg hidden"></div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="cancel-add-word" class="secondary-btn" data-i18n="popup_cancel_btn">Cancel</button>
                <button id="fetch-word-btn" class="primary-btn" data-i18n="popup_search_btn">Search</button>
                <button id="confirm-add-word" class="primary-btn hidden" data-i18n="popup_add_btn">Add to
                    Dictionary</button>
            </div>
        </div>
    </div>

    <script src="popup.js" type="module"></script>
</body>

</html>