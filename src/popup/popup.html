<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>AI Subtitles</title>
    <link rel="stylesheet" href="popup.css">
</head>

<body>
    <div class="header" data-i18n="popup_title">AI Subtitles Dictionary</div>
    <div class="tabs">
        <div class="tab active" data-tab="review" data-i18n="tab_review">Review</div>
        <div class="tab" data-tab="words" data-i18n="tab_words">Words</div>
        <div class="tab" data-tab="history" data-i18n="tab_history">History</div>
        <div class="tab" data-tab="settings" data-i18n="tab_settings">Settings</div>
    </div>

    <!-- Review Tab -->
    <div id="review-tab" class="content">
        <div class="review-summary">
            <p id="words-count">0 words to review</p>
            <button id="start-review-btn" class="primary-btn" data-i18n="start_review">Start Review Session</button>
            <button id="start-flashcards-btn" class="secondary-btn" style="margin-top: 12px;"
                data-i18n="practice_flashcards">üìö Practice Flashcards</button>
            <button id="start-definition-cards-btn" class="secondary-btn" style="margin-top: 12px;"
                data-i18n="definition_cards">üìñ Definition Cards</button>
        </div>
        <div id="no-review" class="hidden" style="text-align:center; color:#888;" data-i18n="all_caught_up">
            All caught up! üéâ
        </div>
    </div>

    <!-- Words Tab -->
    <div id="words-tab" class="content hidden">
        <div class="words-header">
            <div style="display: flex; gap: 8px; margin-bottom: 8px;">
                <select id="category-filter" style="flex: 1;">
                    <option value="all">All Categories</option>
                </select>
                <button id="manage-categories-btn" style="width: auto; padding: 8px 12px; font-size: 12px;"
                    data-i18n="manage_categories">Manage</button>
            </div>
            <input type="text" id="word-search" placeholder="Search words...">
            <div id="word-stats">Total: <span id="total-words">0</span> words</div>
        </div>
        <div id="words-list" class="words-list">
            <!-- Words injected here -->
        </div>
        <div id="no-words" class="hidden" style="text-align:center; color:#888;">
            No words yet. Click on words in YouTube subtitles to add them!
        </div>
    </div>

    <!-- History Tab -->
    <div id="history-tab" class="content hidden">
        <div class="words-header">
            <input type="text" id="history-search" placeholder="Search history...">
            <div id="history-stats">Total: <span id="total-history">0</span> viewed</div>
        </div>
        <div id="history-list" class="words-list">
            <!-- History words injected here -->
        </div>
        <div id="no-history" class="hidden" style="text-align:center; color:#888;">
            No history yet. Click on words in YouTube subtitles!
        </div>
    </div>

    <!-- Settings Tab -->
    <div id="settings-tab" class="content hidden">
        <div class="form-group">
            <label data-i18n="settings_api_key">Gemini API Key</label>
            <input type="password" id="api-key" placeholder="Enter your API Key">
        </div>

        <div class="form-group">
            <label data-i18n="settings_model">Gemini Model</label>
            <select id="gemini-model">
            </select>
        </div>

        <div class="form-group">
            <label data-i18n="quiz_settings">Quiz Types</label>
            <div class="checkbox-group">
                <label class="checkbox-label">
                    <input type="checkbox" id="quiz-translation" checked>
                    <span data-i18n="quiz_translation">Translation Quiz</span>
                </label>
                <label class="checkbox-label">
                    <input type="checkbox" id="quiz-transcription" checked>
                    <span data-i18n="quiz_transcription">Transcription Quiz</span>
                </label>
            </div>
        </div>

        <div class="form-group">
            <label for="app-language" data-i18n="settings_language">Interface & AI Language</label>
            <select id="app-language" class="model-select">
                <option value="en">English</option>
                <option value="ru">–†—É—Å—Å–∫–∏–π (Russian)</option>
                <option value="uk">–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞ (Ukrainian)</option>
            </select>
        </div>

        <div class="form-group">
            <label data-i18n="flashcards_settings">Flashcards Settings</label>
            <div class="checkbox-group">
                <label class="checkbox-label">
                    <input type="checkbox" id="flashcards-include-history" checked>
                    <span data-i18n="settings_flashcards_history">Include History words in Flashcards</span>
                </label>
            </div>
        </div>

        <div class="form-group">
            <label data-i18n="settings_data_management">Data Management</label>
            <div style="display: flex; gap: 10px;">
                <button id="export-data-btn" class="secondary-btn" style="flex: 1;" data-i18n="settings_export">Export
                    Data</button>
                <button id="import-data-btn" class="secondary-btn" style="flex: 1;" data-i18n="settings_import">Import
                    Data</button>
                <input type="file" id="import-file-input" accept=".json" style="display: none;">
            </div>
        </div>

        <div class="save-container">
            <button id="save-settings" class="primary-btn" data-i18n="settings_save">Save Settings</button>
        </div>
        <p style="font-size:12px; color:#666; margin-top:10px;">
            Get your key from <a href="https://aistudio.google.com/" target="_blank">Google AI Studio</a>.
        </p>
    </div>

    <script src="popup.js" type="module"></script>
</body>

</html>