<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>AI Subtitles</title>
    <link rel="stylesheet" href="popup.css">
</head>

<body>
    <div class="header" data-i18n="popup_title">AI Subtitles Dictionary</div>
    <div class="tabs">
        <div class="tab active" data-tab="review" data-i18n="tab_review">Review</div>
        <div class="tab" data-tab="words" data-i18n="tab_words">Words</div>
        <div class="tab" data-tab="history" data-i18n="tab_history">History</div>
        <div class="tab" data-tab="settings" data-i18n="tab_settings">Settings</div>
    </div>

    <!-- Review Tab -->
    <div id="review-tab" class="content">
        <div class="review-summary">
            <p id="words-count">0 words to review</p>
            <button id="start-review-btn" class="primary-btn" data-i18n="start_review">Start Review Session</button>
            <button id="start-flashcards-btn" class="secondary-btn" style="margin-top: 12px;"
                data-i18n="practice_flashcards">üìö Flashcards</button>
            <button id="start-context-cards-btn" class="secondary-btn" style="margin-top: 12px;"
                data-i18n="context_cards">üìù Context Cards</button>
            <button id="start-definition-cards-btn" class="secondary-btn" style="margin-top: 12px;"
                data-i18n="definition_cards">üìñ Definition Cards</button>
        </div>
        <div id="no-review" class="hidden" style="text-align:center; color:#888;" data-i18n="all_caught_up">
            All caught up! üéâ
        </div>
    </div>

    <!-- Words Tab -->
    <div id="words-tab" class="content hidden">
        <div class="words-header">
            <input type="text" id="word-search" placeholder="Search words..." style="margin-bottom: 10px;">
            <div id="word-stats">Total: <span id="total-words">0</span> words</div>
            <button id="add-category-btn" class="secondary-btn" style="width: 100%; margin-bottom: 10px;"
                data-i18n="add_category">+ Add Category</button>
        </div>
        <div id="words-list" class="words-list">
            <!-- Words injected here -->
        </div>
        <div id="no-words" class="hidden" style="text-align:center; color:#888;">
            No words yet. Click on words in YouTube subtitles to add them!
        </div>
    </div>

    <!-- History Tab -->
    <div id="history-tab" class="content hidden">
        <div class="words-header">
            <input type="text" id="history-search" placeholder="Search history...">
            <div id="history-stats">Total: <span id="total-history">0</span> viewed</div>
        </div>
        <div id="history-list" class="words-list">
            <!-- History words injected here -->
        </div>
        <div id="no-history" class="hidden" style="text-align:center; color:#888;">
            No history yet. Click on words in YouTube subtitles!
        </div>
    </div>

    <!-- Settings Tab -->
    <div id="settings-tab" class="content hidden">
        <div class="form-group">
            <label data-i18n="settings_api_key">Gemini API Key</label>
            <input type="password" id="api-key" placeholder="Enter your API Key">
        </div>

        <div class="form-group">
            <label data-i18n="settings_model">Gemini Model</label>
            <select id="gemini-model">
            </select>
        </div>

        <div class="form-group">
            <label data-i18n="quiz_settings">Quiz Types</label>
            <div class="checkbox-group">
                <label class="checkbox-label">
                    <input type="checkbox" id="quiz-translation" checked>
                    <span data-i18n="quiz_translation">Translation Quiz</span>
                </label>
                <label class="checkbox-label">
                    <input type="checkbox" id="quiz-transcription" checked>
                    <span data-i18n="quiz_transcription">Transcription Quiz</span>
                </label>
            </div>
        </div>

        <div class="form-group">
            <label for="app-language" data-i18n="settings_language">Interface & AI Language</label>
            <select id="app-language" class="model-select">
                <option value="en">English</option>
                <option value="ru">–†—É—Å—Å–∫–∏–π (Russian)</option>
                <option value="uk">–£–∫—Ä–∞—ó–Ω—Å—å–∫–∞ (Ukrainian)</option>
            </select>
        </div>

        <div class="form-group">
            <label data-i18n="flashcards_settings">Flashcards Settings</label>
            <div class="checkbox-group">
                <label class="checkbox-label">
                    <input type="checkbox" id="flashcards-include-history" checked>
                    <span data-i18n="settings_flashcards_history">Include History words in Flashcards</span>
                </label>
            </div>
        </div>

        <div class="form-group">
            <label data-i18n="settings_limits">Word Limits</label>
            <div style="margin-top: 8px;">
                <label style="font-size: 13px; color: #666; display: block; margin-bottom: 4px;"
                    data-i18n="settings_tasks_limit">Review Tasks Limit (per session)</label>
                <input type="number" id="tasks-limit" min="1" max="100" value="20"
                    style="width: 95%; padding: 8px; border: 1px solid #ddd; border-radius: 6px;">
            </div>
            <div style="margin-top: 12px;">
                <label style="font-size: 13px; color: #666; display: block; margin-bottom: 4px;"
                    data-i18n="settings_simple_flashcards_words_limit">Simple Flashcards: Words Limit</label>
                <input type="number" id="simple-flashcards-words-limit" min="1" max="200" value="25"
                    style="width: 95%; padding: 8px; border: 1px solid #ddd; border-radius: 6px;">
            </div>
            <div style="margin-top: 12px;">
                <label style="font-size: 13px; color: #666; display: block; margin-bottom: 4px;"
                    data-i18n="settings_simple_flashcards_exercises_limit">Flashcards: Exercises Limit</label>
                <input type="number" id="simple-flashcards-exercises-limit" min="1" max="100" value="25"
                    style="width: 95%; padding: 8px; border: 1px solid #ddd; border-radius: 6px;">
            </div>
            <div style="margin-top: 12px;">
                <label style="font-size: 13px; color: #666; display: block; margin-bottom: 4px;"
                    data-i18n="settings_flashcards_words_limit">Context Cards: Words Limit</label>
                <input type="number" id="flashcards-words-limit" min="1" max="200" value="25"
                    style="width: 95%; padding: 8px; border: 1px solid #ddd; border-radius: 6px;">
            </div>
            <div style="margin-top: 12px;">
                <label style="font-size: 13px; color: #666; display: block; margin-bottom: 4px;"
                    data-i18n="settings_flashcards_exercises_limit">Context Cards: Exercises Limit</label>
                <input type="number" id="flashcards-exercises-limit" min="1" max="100" value="25"
                    style="width: 95%; padding: 8px; border: 1px solid #ddd; border-radius: 6px;">
            </div>
            <div style="margin-top: 12px;">
                <label style="font-size: 13px; color: #666; display: block; margin-bottom: 4px;"
                    data-i18n="settings_def_cards_words_limit">Definition Cards Words
                    Limit</label>
                <input type="number" id="def-cards-words-limit" min="1" max="50" value="10"
                    style="width: 95%; padding: 8px; border: 1px solid #ddd; border-radius: 6px;">
            </div>
            <div style="margin-top: 12px;">
                <label style="font-size: 13px; color: #666; display: block; margin-bottom: 4px;"
                    data-i18n="settings_def_cards_exercises_limit">Definition Cards Exercises Limit</label>
                <input type="number" id="def-cards-exercises-limit" min="1" max="50" value="10"
                    style="width: 95%; padding: 8px; border: 1px solid #ddd; border-radius: 6px;">
            </div>
        </div>

        <div class="form-group">
            <label data-i18n="settings_data_management">Data Management</label>
            <div style="display: flex; gap: 10px;">
                <button id="export-data-btn" class="secondary-btn" style="flex: 1;" data-i18n="settings_export">Export
                    Data</button>
                <button id="import-data-btn" class="secondary-btn" style="flex: 1;" data-i18n="settings_import">Import
                    Data</button>
                <input type="file" id="import-file-input" accept=".json" style="display: none;">
            </div>
        </div>

        <div class="save-container">
            <button id="save-settings" class="primary-btn" data-i18n="settings_save">Save Settings</button>
        </div>
        <p style="font-size:12px; color:#666; margin-top:10px;">
            Get your key from <a href="https://aistudio.google.com/" target="_blank">Google AI Studio</a>.
        </p>
    </div>

    <script src="popup.js" type="module"></script>
</body>

</html>