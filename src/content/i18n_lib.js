(function () {
    const translations = {
        en: {
            extName: "AI Subtitles Dictionary",
            extDescription: "Learn languages with AI-powered subtitles and flashcards",
            popup_title: "AI Subtitles Dictionary",
            tab_review: "Review",
            tab_words: "Words",
            tab_history: "History",
            tab_settings: "Settings",
            words_to_review: "words to review",
            all_caught_up: "All caught up! üéâ",
            start_review: "Start Review Session",
            practice_flashcards: "üìö Practice Flashcards",
            definition_cards: "üìñ Definition Cards",
            search_words: "Search words...",
            category_all: "All Categories",
            category_default: "Default",
            manage_categories: "Manage Categories",
            learn_button: "Learn",
            delete_button: "Delete",
            correct: "Correct",
            wrong: "Wrong",
            no_history: "No history yet. Start learning!",
            settings_api_key: "Gemini API Key",
            settings_api_key_placeholder: "Enter your API key",
            settings_get_key: "Get API Key",
            settings_model: "Gemini Model",
            settings_model_loading: "Loading models...",
            settings_flashcards_history: "Include History words in Flashcards",
            settings_language: "Interface & AI Language",
            settings_save: "Save Settings",
            settings_saved: "‚úÖ Saved!",
            popup_transcription: "Trans:",
            popup_translation: "Translation:",
            popup_progress: "üìä Progress:",
            popup_close: "Close",
            flashcards_title: "Flashcards",
            flashcards_loading: "Loading flashcards...",
            flashcards_hint: "Hint",
            flashcards_check: "Check Answer",
            flashcards_next: "Next Card",
            flashcards_correct: "Correct! ‚úì",
            flashcards_wrong: "Wrong ‚úó",
            flashcards_complete: "Great Job!",
            flashcards_reviewed_all: "You've reviewed all cards!",
            flashcards_start_over: "Start Over",
            flashcards_close: "Close",
            def_cards_title: "Definition Cards",
            def_cards_loading: "Generating cards with AI...",
            def_cards_wait: "This may take a moment",
            def_cards_flip_hint: "Click card to flip üîÑ",
            def_cards_prev: "‚Üê Previous",
            def_cards_next: "Next ‚Üí",
            def_cards_finish: "Finish",
            def_cards_complete: "Great Job!",
            def_cards_reviewed_all: "You've reviewed all words!",
            error_api_key: "API Key not set. Please configure in extension settings.",
            error_no_words: "No words available. Add some words first!",
            error_unknown: "An error occurred",
            error_try_again: "Retry",
            quiz_translation: "Translation Quiz",
            quiz_transcription: "Transcription Quiz",
            flashcards_settings: "Flashcards Settings",
            quiz_settings: "Quiz Settings",
            total_words: "Total Words:",
            total_history: "Total History:",
            no_words_yet: "No words yet. Go to YouTube and click on subtitles to add words!",
            notification_review_title: "Time to Review!",
            notification_review_message: "You have %n words to review. Click to practice!",
            review_title: "Review Session",
            review_all_caught_up: "All caught up!",
            review_no_words: "You have no words to review right now.",
            review_complete_title: "Session Complete!",
            review_complete_msg: "Great job!",
            loading: "Loading...",
            popup_loading_explanation: "Loading explanation...",
            popup_learn_btn: "Learn",
            popup_added_to_category: "Added to category",
            category_new: "+ New Category",
            error_prefix: "Error:",
            settings_title: "Subtitle Settings",
            settings_text_color: "Text Color",
            settings_text_opacity: "Text Opacity",
            settings_bg_color: "Background Color",
            settings_bg_opacity: "Background Opacity",
            settings_learned_words: "Learned Words",
            settings_success_color: "Success Color (70%+)",
            settings_progress_color: "Progress Color (<70%)",
            no_explanation: "No explanation available."
        },
        ru: {
            extName: "AI –°–ª–æ–≤–∞—Ä—å –°—É–±—Ç–∏—Ç—Ä–æ–≤",
            extDescription: "–ò–∑—É—á–∞–π—Ç–µ —è–∑—ã–∫–∏ —Å –ø–æ–º–æ—â—å—é AI —Å—É–±—Ç–∏—Ç—Ä–æ–≤ –∏ —Ñ–ª–µ—à-–∫–∞—Ä—Ç–æ—á–µ–∫",
            popup_title: "AI –°–ª–æ–≤–∞—Ä—å –°—É–±—Ç–∏—Ç—Ä–æ–≤",
            tab_review: "–ü–æ–≤—Ç–æ—Ä",
            tab_words: "–°–ª–æ–≤–∞",
            tab_history: "–ò—Å—Ç–æ—Ä–∏—è",
            tab_settings: "–ù–∞—Å—Ç—Ä–æ–π–∫–∏",
            words_to_review: "—Å–ª–æ–≤ –¥–ª—è –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è",
            all_caught_up: "–í—Å—ë –≤—ã—É—á–µ–Ω–æ! üéâ",
            start_review: "–ù–∞—á–∞—Ç—å –ü–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ",
            practice_flashcards: "üìö –§–ª–µ—à-–∫–∞—Ä—Ç–æ—á–∫–∏",
            definition_cards: "üìñ –ö–∞—Ä—Ç–æ—á–∫–∏ –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π",
            search_words: "–ü–æ–∏—Å–∫ —Å–ª–æ–≤...",
            category_all: "–í—Å–µ –ö–∞—Ç–µ–≥–æ—Ä–∏–∏",
            category_default: "–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é",
            manage_categories: "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ö–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏",
            learn_button: "–£—á–∏—Ç—å",
            delete_button: "–£–¥–∞–ª–∏—Ç—å",
            correct: "–ü—Ä–∞–≤–∏–ª—å–Ω–æ",
            wrong: "–û—à–∏–±–∫–∏",
            no_history: "–ò—Å—Ç–æ—Ä–∏—è –ø—É—Å—Ç–∞. –ù–∞—á–Ω–∏—Ç–µ —É—á–∏—Ç—å—Å—è!",
            settings_api_key: "Gemini API –ö–ª—é—á",
            settings_api_key_placeholder: "–í–≤–µ–¥–∏—Ç–µ –≤–∞—à API –∫–ª—é—á",
            settings_get_key: "–ü–æ–ª—É—á–∏—Ç—å API –ö–ª—é—á",
            settings_model: "–ú–æ–¥–µ–ª—å Gemini",
            settings_model_loading: "–ó–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–µ–π...",
            settings_flashcards_history: "–í–∫–ª—é—á–∞—Ç—å —Å–ª–æ–≤–∞ –∏–∑ –∏—Å—Ç–æ—Ä–∏–∏",
            settings_language: "–Ø–∑—ã–∫ –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –∏ AI",
            settings_save: "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ù–∞—Å—Ç—Ä–æ–π–∫–∏",
            settings_saved: "‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–æ!",
            popup_transcription: "–¢—Ä–∞–Ω—Å–∫—Ä:",
            popup_translation: "–ü–µ—Ä–µ–≤–æ–¥:",
            popup_progress: "üìä –ü—Ä–æ–≥—Ä–µ—Å—Å:",
            popup_close: "–ó–∞–∫—Ä—ã—Ç—å",
            flashcards_title: "–§–ª–µ—à-–∫–∞—Ä—Ç–æ—á–∫–∏",
            flashcards_loading: "–ó–∞–≥—Ä—É–∑–∫–∞ –∫–∞—Ä—Ç–æ—á–µ–∫...",
            flashcards_hint: "–ü–æ–¥—Å–∫–∞–∑–∫–∞",
            flashcards_check: "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –û—Ç–≤–µ—Ç",
            flashcards_next: "–°–ª–µ–¥—É—é—â–∞—è –ö–∞—Ä—Ç–æ—á–∫–∞",
            flashcards_correct: "–ü—Ä–∞–≤–∏–ª—å–Ω–æ! ‚úì",
            flashcards_wrong: "–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ ‚úó",
            flashcards_complete: "–û—Ç–ª–∏—á–Ω–∞—è –†–∞–±–æ—Ç–∞!",
            flashcards_reviewed_all: "–í—ã –ø–æ–≤—Ç–æ—Ä–∏–ª–∏ –≤—Å–µ –∫–∞—Ä—Ç–æ—á–∫–∏!",
            flashcards_start_over: "–ù–∞—á–∞—Ç—å –°–Ω–∞—á–∞–ª–∞",
            flashcards_close: "–ó–∞–∫—Ä—ã—Ç—å",
            def_cards_title: "–ö–∞—Ä—Ç–æ—á–∫–∏ –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–π",
            def_cards_loading: "–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–∞—Ä—Ç–æ—á–µ–∫ —Å –ø–æ–º–æ—â—å—é AI...",
            def_cards_wait: "–≠—Ç–æ –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä–æ–µ –≤—Ä–µ–º—è",
            def_cards_flip_hint: "–ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã –ø–µ—Ä–µ–≤–µ—Ä–Ω—É—Ç—å üîÑ",
            def_cards_prev: "‚Üê –ù–∞–∑–∞–¥",
            def_cards_next: "–î–∞–ª–µ–µ ‚Üí",
            def_cards_finish: "–ó–∞–≤–µ—Ä—à–∏—Ç—å",
            def_cards_complete: "–û—Ç–ª–∏—á–Ω–∞—è –†–∞–±–æ—Ç–∞!",
            def_cards_reviewed_all: "–í—ã –ø–æ–≤—Ç–æ—Ä–∏–ª–∏ –≤—Å–µ —Å–ª–æ–≤–∞!",
            error_api_key: "API –∫–ª—é—á –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –Ω–∞—Å—Ç—Ä–æ–π—Ç–µ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è.",
            error_no_words: "–ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å–ª–æ–≤. –°–Ω–∞—á–∞–ª–∞ –¥–æ–±–∞–≤—å—Ç–µ —Å–ª–æ–≤–∞!",
            error_unknown: "–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞",
            error_try_again: "–ü–æ–≤—Ç–æ—Ä–∏—Ç—å",
            quiz_translation: "–¢–µ—Å—Ç –Ω–∞ –ø–µ—Ä–µ–≤–æ–¥",
            quiz_transcription: "–¢–µ—Å—Ç –Ω–∞ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—é",
            flashcards_settings: "–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –§–ª–µ—à-–∫–∞—Ä—Ç–æ—á–µ–∫",
            quiz_settings: "–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¢–µ—Å—Ç–æ–≤",
            total_words: "–í—Å–µ–≥–æ —Å–ª–æ–≤:",
            total_history: "–í—Å–µ–≥–æ –≤ –∏—Å—Ç–æ—Ä–∏–∏:",
            no_words_yet: "–°–ª–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ YouTube –∏ –∫–ª–∏–∫–Ω–∏—Ç–µ –ø–æ —Å—É–±—Ç–∏—Ç—Ä–∞–º, —á—Ç–æ–±—ã –¥–æ–±–∞–≤–∏—Ç—å —Å–ª–æ–≤–∞!",
            notification_review_title: "–í—Ä–µ–º—è –ø–æ–≤—Ç–æ—Ä–∏—Ç—å —Å–ª–æ–≤–∞!",
            notification_review_message: "–£ –≤–∞—Å %n —Å–ª–æ–≤ –¥–ª—è –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è. –ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å!",
            review_title: "–°–µ—Å—Å–∏—è –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è",
            review_all_caught_up: "–í—Å—ë –ø–æ–≤—Ç–æ—Ä–∏–ª–∏!",
            review_no_words: "–°–µ–π—á–∞—Å –Ω–µ—Ç —Å–ª–æ–≤ –¥–ª—è –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏—è.",
            review_complete_title: "–°–µ—Å—Å–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞!",
            review_complete_msg: "–û—Ç–ª–∏—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞!",
            loading: "–ó–∞–≥—Ä—É–∑–∫–∞...",
            popup_loading_explanation: "–ó–∞–≥—Ä—É–∑–∫–∞ –æ–±—ä—è—Å–Ω–µ–Ω–∏—è...",
            popup_learn_btn: "–£—á–∏—Ç—å",
            popup_added_to_category: "–î–æ–±–∞–≤–ª–µ–Ω–æ –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏—é",
            category_new: "+ –ù–æ–≤–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è",
            error_prefix: "–û—à–∏–±–∫–∞:",
            settings_title: "–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å—É–±—Ç–∏—Ç—Ä–æ–≤",
            settings_text_color: "–¶–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞",
            settings_text_opacity: "–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å —Ç–µ–∫—Å—Ç–∞",
            settings_bg_color: "–¶–≤–µ—Ç —Ñ–æ–Ω–∞",
            settings_bg_opacity: "–ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å —Ñ–æ–Ω–∞",
            settings_learned_words: "–ò–∑—É—á–µ–Ω–Ω—ã–µ —Å–ª–æ–≤–∞",
            settings_success_color: "–¶–≤–µ—Ç —É—Å–ø–µ—Ö–∞ (70%+)",
            settings_progress_color: "–¶–≤–µ—Ç –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ (<70%)",
            no_explanation: "–û–±—ä—è—Å–Ω–µ–Ω–∏–µ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ."
        },
        uk: {
            extName: "AI –°–ª–æ–≤–Ω–∏–∫ –°—É–±—Ç–∏—Ç—Ä—ñ–≤",
            extDescription: "–í–∏–≤—á–∞–π—Ç–µ –º–æ–≤–∏ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é AI —Å—É–±—Ç–∏—Ç—Ä—ñ–≤ —Ç–∞ —Ñ–ª–µ—à-–∫–∞—Ä—Ç–æ–∫",
            popup_title: "AI –°–ª–æ–≤–Ω–∏–∫ –°—É–±—Ç–∏—Ç—Ä—ñ–≤",
            tab_review: "–ü–æ–≤—Ç–æ—Ä–µ–Ω–Ω—è",
            tab_words: "–°–ª–æ–≤–∞",
            tab_history: "–Ü—Å—Ç–æ—Ä—ñ—è",
            tab_settings: "–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è",
            words_to_review: "—Å–ª—ñ–≤ –¥–ª—è –ø–æ–≤—Ç–æ—Ä–µ–Ω–Ω—è",
            all_caught_up: "–í—Å–µ –≤–∏–≤—á–µ–Ω–æ! üéâ",
            start_review: "–ü–æ—á–∞—Ç–∏ –ü–æ–≤—Ç–æ—Ä–µ–Ω–Ω—è",
            practice_flashcards: "üìö –§–ª–µ—à-–∫–∞—Ä—Ç–∫–∏",
            definition_cards: "üìñ –ö–∞—Ä—Ç–∫–∏ –í–∏–∑–Ω–∞—á–µ–Ω—å",
            search_words: "–ü–æ—à—É–∫ —Å–ª—ñ–≤...",
            category_all: "–í—Å—ñ –ö–∞—Ç–µ–≥–æ—Ä—ñ—ó",
            category_default: "–ó–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º",
            manage_categories: "–ö–µ—Ä—É–≤–∞–Ω–Ω—è –ö–∞—Ç–µ–≥–æ—Ä—ñ—è–º–∏",
            learn_button: "–í—á–∏—Ç–∏",
            delete_button: "–í–∏–¥–∞–ª–∏—Ç–∏",
            correct: "–ü—Ä–∞–≤–∏–ª—å–Ω–æ",
            wrong: "–ü–æ–º–∏–ª–∫–∏",
            no_history: "–Ü—Å—Ç–æ—Ä—ñ—è –ø–æ—Ä–æ–∂–Ω—è. –ü–æ—á–Ω—ñ—Ç—å –≤—á–∏—Ç–∏—Å—è!",
            settings_api_key: "Gemini API –ö–ª—é—á",
            settings_api_key_placeholder: "–í–≤–µ–¥—ñ—Ç—å –≤–∞—à API –∫–ª—é—á",
            settings_get_key: "–û—Ç—Ä–∏–º–∞—Ç–∏ API –ö–ª—é—á",
            settings_model: "–ú–æ–¥–µ–ª—å Gemini",
            settings_model_loading: "–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –º–æ–¥–µ–ª–µ–π...",
            settings_flashcards_history: "–í–∫–ª—é—á–∞—Ç–∏ —Å–ª–æ–≤–∞ –∑ —ñ—Å—Ç–æ—Ä—ñ—ó",
            settings_language: "–ú–æ–≤–∞ –Ü–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É —Ç–∞ AI",
            settings_save: "–ó–±–µ—Ä–µ–≥—Ç–∏ –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è",
            settings_saved: "‚úÖ –ó–±–µ—Ä–µ–∂–µ–Ω–æ!",
            popup_transcription: "–¢—Ä–∞–Ω—Å–∫—Ä:",
            popup_translation: "–ü–µ—Ä–µ–∫–ª–∞–¥:",
            popup_progress: "üìä –ü—Ä–æ–≥—Ä–µ—Å:",
            popup_close: "–ó–∞–∫—Ä–∏—Ç–∏",
            flashcards_title: "–§–ª–µ—à-–∫–∞—Ä—Ç–∫–∏",
            flashcards_loading: "–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∫–∞—Ä—Ç–æ–∫...",
            flashcards_hint: "–ü—ñ–¥–∫–∞–∑–∫–∞",
            flashcards_check: "–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –í—ñ–¥–ø–æ–≤—ñ–¥—å",
            flashcards_next: "–ù–∞—Å—Ç—É–ø–Ω–∞ –ö–∞—Ä—Ç–∫–∞",
            flashcards_correct: "–ü—Ä–∞–≤–∏–ª—å–Ω–æ! ‚úì",
            flashcards_wrong: "–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ ‚úó",
            flashcards_complete: "–ß—É–¥–æ–≤–∞ –†–æ–±–æ—Ç–∞!",
            flashcards_reviewed_all: "–í–∏ –ø–æ–≤—Ç–æ—Ä–∏–ª–∏ –≤—Å—ñ –∫–∞—Ä—Ç–∫–∏!",
            flashcards_start_over: "–ü–æ—á–∞—Ç–∏ –°–ø–æ—á–∞—Ç–∫—É",
            flashcards_close: "–ó–∞–∫—Ä–∏—Ç–∏",
            def_cards_title: "–ö–∞—Ä—Ç–∫–∏ –í–∏–∑–Ω–∞—á–µ–Ω—å",
            def_cards_loading: "–ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –∫–∞—Ä—Ç–æ–∫ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é AI...",
            def_cards_wait: "–¶–µ –º–æ–∂–µ –∑–∞–π–Ω—è—Ç–∏ –¥–µ—è–∫–∏–π —á–∞—Å",
            def_cards_flip_hint: "–ù–∞—Ç–∏—Å–Ω—ñ—Ç—å, —â–æ–± –ø–µ—Ä–µ–≤–µ—Ä–Ω—É—Ç–∏ üîÑ",
            def_cards_prev: "‚Üê –ù–∞–∑–∞–¥",
            def_cards_next: "–î–∞–ª—ñ ‚Üí",
            def_cards_finish: "–ó–∞–≤–µ—Ä—à–∏—Ç–∏",
            def_cards_complete: "–ß—É–¥–æ–≤–∞ –†–æ–±–æ—Ç–∞!",
            def_cards_reviewed_all: "–í–∏ –ø–æ–≤—Ç–æ—Ä–∏–ª–∏ –≤—Å—ñ —Å–ª–æ–≤–∞!",
            error_api_key: "API –∫–ª—é—á –Ω–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ. –ë—É–¥—å –ª–∞—Å–∫–∞, –Ω–∞–ª–∞—à—Ç—É–π—Ç–µ –≤ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è—Ö —Ä–æ–∑—à–∏—Ä–µ–Ω–Ω—è.",
            error_no_words: "–ù–µ–º–∞—î –¥–æ—Å—Ç—É–ø–Ω–∏—Ö —Å–ª—ñ–≤. –°–ø–æ—á–∞—Ç–∫—É –¥–æ–¥–∞–π—Ç–µ —Å–ª–æ–≤–∞!",
            error_unknown: "–°—Ç–∞–ª–∞—Å—è –ø–æ–º–∏–ª–∫–∞",
            error_try_again: "–ü–æ–≤—Ç–æ—Ä–∏—Ç–∏",
            quiz_translation: "–¢–µ—Å—Ç –Ω–∞ –ø–µ—Ä–µ–∫–ª–∞–¥",
            quiz_transcription: "–¢–µ—Å—Ç –Ω–∞ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü—ñ—é",
            flashcards_settings: "–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –§–ª–µ—à-–∫–∞—Ä—Ç–æ–∫",
            quiz_settings: "–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –¢–µ—Å—Ç—ñ–≤",
            total_words: "–í—Å—å–æ–≥–æ —Å–ª—ñ–≤:",
            total_history: "–í—Å—å–æ–≥–æ –≤ —ñ—Å—Ç–æ—Ä—ñ—ó:",
            no_words_yet: "–°–ª—ñ–≤ –ø–æ–∫–∏ –Ω–µ–º–∞—î. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –Ω–∞ YouTube —ñ –∫–ª—ñ–∫–Ω—ñ—Ç—å –ø–æ —Å—É–±—Ç–∏—Ç—Ä–∞—Ö, —â–æ–± –¥–æ–¥–∞—Ç–∏ —Å–ª–æ–≤–∞!",
            notification_review_title: "–ß–∞—Å –ø–æ–≤—Ç–æ—Ä–∏—Ç–∏ —Å–ª–æ–≤–∞!",
            notification_review_message: "–£ –≤–∞—Å %n —Å–ª—ñ–≤ –¥–ª—è –ø–æ–≤—Ç–æ—Ä–µ–Ω–Ω—è. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å, —â–æ–± –ø–æ—á–∞—Ç–∏!",
            review_title: "–°–µ—Å—ñ—è –ø–æ–≤—Ç–æ—Ä–µ–Ω–Ω—è",
            review_all_caught_up: "–í—Å–µ –ø–æ–≤—Ç–æ—Ä–∏–ª–∏!",
            review_no_words: "–ó–∞—Ä–∞–∑ –Ω–µ–º–∞—î —Å–ª—ñ–≤ –¥–ª—è –ø–æ–≤—Ç–æ—Ä–µ–Ω–Ω—è.",
            review_complete_title: "–°–µ—Å—ñ—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞!",
            review_complete_msg: "–ß—É–¥–æ–≤–∞ —Ä–æ–±–æ—Ç–∞!",
            loading: "–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...",
            popup_loading_explanation: "–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –ø–æ—è—Å–Ω–µ–Ω–Ω—è...",
            popup_learn_btn: "–í—á–∏—Ç–∏",
            popup_added_to_category: "–î–æ–¥–∞–Ω–æ –≤ –∫–∞—Ç–µ–≥–æ—Ä—ñ—é",
            category_new: "+ –ù–æ–≤–∞ –∫–∞—Ç–µ–≥–æ—Ä—ñ—è",
            error_prefix: "–ü–æ–º–∏–ª–∫–∞:",
            settings_title: "–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Å—É–±—Ç–∏—Ç—Ä—ñ–≤",
            settings_text_color: "–ö–æ–ª—ñ—Ä —Ç–µ–∫—Å—Ç—É",
            settings_text_opacity: "–ü—Ä–æ–∑–æ—Ä—ñ—Å—Ç—å —Ç–µ–∫—Å—Ç—É",
            settings_bg_color: "–ö–æ–ª—ñ—Ä —Ñ–æ–Ω—É",
            settings_bg_opacity: "–ü—Ä–æ–∑–æ—Ä—ñ—Å—Ç—å —Ñ–æ–Ω—É",
            settings_learned_words: "–í–∏–≤—á–µ–Ω—ñ —Å–ª–æ–≤–∞",
            settings_success_color: "–ö–æ–ª—ñ—Ä —É—Å–ø—ñ—Ö—É (70%+)",
            settings_progress_color: "–ö–æ–ª—ñ—Ä –ø—Ä–æ–≥—Ä–µ—Å—É (<70%)",
            no_explanation: "–ü–æ—è—Å–Ω–µ–Ω–Ω—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–µ."
        }
    };

    window.AiSubtitlesI18n = {
        language: 'en',

        async init() {
            const result = await chrome.storage.local.get('appLanguage');
            if (result.appLanguage) {
                this.language = result.appLanguage;
            } else {
                const uiLang = chrome.i18n.getUILanguage();
                if (uiLang.startsWith('ru')) this.language = 'ru';
                else if (uiLang.startsWith('uk')) this.language = 'uk';
                else this.language = 'en';
            }
        },

        getMessage(key) {
            const langData = translations[this.language] || translations['en'];
            return langData[key] || translations['en'][key] || key;
        }
    };
})();
